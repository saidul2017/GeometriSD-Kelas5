<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi Geometri - Kelas 5 SD</title>
    <link rel="stylesheet" href="css/modern-style.css">
    <style>
        .topic-card {
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .topic-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }

        .topic-icon {
            font-size: 80px;
            margin-bottom: 20px;
            display: inline-block;
            transition: transform 0.4s ease;
        }

        .topic-card:hover .topic-icon {
            transform: scale(1.2) rotate(5deg);
        }

        .topic-badge {
            position: absolute;
            top: 16px;
            right: 16px;
            padding: 6px 12px;
            border-radius: 100px;
            font-size: 12px;
            font-weight: 600;
            background: white;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .gradient-bg-1 { background: var(--gradient-primary); }
        .gradient-bg-2 { background: var(--gradient-success); }
        .gradient-bg-3 { background: var(--gradient-warning); }
        .gradient-bg-4 { background: var(--gradient-info); }
        .gradient-bg-5 { background: var(--gradient-orange); }

        .category-header {
            text-align: center;
            padding: 60px 20px 40px;
            background: linear-gradient(135deg, var(--color-primary) 0%, #764ba2 100%);
            color: white;
            border-radius: var(--radius-xl);
            margin-bottom: 40px;
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 100;
            background: white;
            box-shadow: var(--shadow-lg);
        }

        @media (max-width: 768px) {
            .topic-icon { font-size: 60px; }
            .category-header { padding: 40px 20px 30px; }
        }
    </style>
</head>
<body>
    <!-- Back Button -->
    <a href="dashboard-siswa.html" class="btn-modern btn-primary back-button">
        ‚Üê Kembali
    </a>

    <div style="max-width: 1400px; margin: 0 auto; padding: 20px;">
        <!-- Header -->
        <div class="category-header">
            <h1 style="font-family: 'Fredoka', sans-serif; font-size: 56px; margin-bottom: 16px; text-shadow: 2px 2px 4px rgba(0,0,0,0.2);">
                üìö Pilih Materi Belajar
            </h1>
            <p style="font-size: 20px; opacity: 0.95;">Belajar geometri dengan cara yang menyenangkan!</p>
        </div>

        <!-- Bangun Datar Section -->
        <div style="margin-bottom: 60px;">
            <h2 style="font-family: 'Fredoka', sans-serif; font-size: 40px; margin-bottom: 30px; color: #2d3748; text-align: center;">
                üü¶ Bangun Datar
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px;">
                <!-- Segitiga -->
                <div class="modern-card topic-card gradient-bg-1" onclick="goToMateri('segitiga')" style="color: white; text-align: center; padding: 40px 30px;">
                    <span class="topic-badge" style="color: var(--color-primary);">Populer ‚≠ê</span>
                    <div class="topic-icon icon-bounce">üî∫</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Segitiga</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Pelajari rumus luas & keliling segitiga</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Persegi -->
                <div class="modern-card topic-card gradient-bg-2" onclick="goToMateri('persegi')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-pulse">üü¶</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Persegi</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Kenali sifat & rumus persegi</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Persegi Panjang -->
                <div class="modern-card topic-card gradient-bg-3" onclick="goToMateri('persegi-panjang')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-rotate">üìè</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Persegi Panjang</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Pahami rumus luas & keliling</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Jajar Genjang -->
                <div class="modern-card topic-card gradient-bg-4" onclick="goToMateri('jajar-genjang')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-bounce">üî∑</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Jajar Genjang</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Belajar rumus & sifatnya</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Trapesium -->
                <div class="modern-card topic-card gradient-bg-5" onclick="goToMateri('trapesium')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-pulse">üî∂</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Trapesium</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Rumus luas trapesium</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Belah Ketupat -->
                <div class="modern-card topic-card gradient-bg-1" onclick="goToMateri('belah-ketupat')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-rotate">üíé</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Belah Ketupat</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Sifat & rumus belah ketupat</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Layang-layang -->
                <div class="modern-card topic-card gradient-bg-2" onclick="goToMateri('layang-layang')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-bounce">ü™Å</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Layang-layang</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Rumus luas layang-layang</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Lingkaran -->
                <div class="modern-card topic-card gradient-bg-3" onclick="goToMateri('lingkaran')" style="color: white; text-align: center; padding: 40px 30px;">
                    <span class="topic-badge" style="color: var(--color-warning);">Penting! üî•</span>
                    <div class="topic-icon icon-rotate">‚≠ï</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Lingkaran</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Keliling & luas lingkaran</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>
            </div>
        </div>

        <!-- Bangun Ruang Section -->
        <div style="margin-bottom: 60px;">
            <h2 style="font-family: 'Fredoka', sans-serif; font-size: 40px; margin-bottom: 30px; color: #2d3748; text-align: center;">
                üì¶ Bangun Ruang
            </h2>
            
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px;">
                <!-- Kubus -->
                <div class="modern-card topic-card gradient-bg-4" onclick="goToMateri('kubus')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-pulse">üé≤</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Kubus</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Volume & luas permukaan kubus</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>

                <!-- Balok -->
                <div class="modern-card topic-card gradient-bg-5" onclick="goToMateri('balok')" style="color: white; text-align: center; padding: 40px 30px;">
                    <div class="topic-icon icon-bounce">üì¶</div>
                    <h3 style="font-family: 'Fredoka', sans-serif; font-size: 28px; margin-bottom: 12px;">Balok</h3>
                    <p style="opacity: 0.95; margin-bottom: 20px;">Rumus volume & luas balok</p>
                    <div class="progress-bar-modern" style="margin-bottom: 16px;">
                        <div class="progress-fill" style="width: 0%; background: white;"></div>
                    </div>
                    <span style="font-size: 14px; opacity: 0.9;">0% Selesai</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div style="text-align: center; padding: 40px 20px;">
            <p style="color: #718096; font-size: 16px;">üí° <strong>Tips:</strong> Klik materi untuk mulai belajar!</p>
        </div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    
    <script>
        console.log('Materi page loaded!');

        // Check authentication
        firebase.auth().onAuthStateChanged((user) => {
            if (!user) {
                window.location.href = 'login.html';
                return;
            }
            console.log('User authenticated:', user.uid);
            loadUserProgress(user.uid);
        });

        // Load user progress
        async function loadUserProgress(userId) {
            try {
                const snapshot = await firebase.database().ref('progress/' + userId + '/materi').once('value');
                const progressData = snapshot.val();
                
                if (progressData) {
                    console.log('Progress data:', progressData);
                    // Update progress bars based on data
                    // TODO: Implement progress bar updates
                }
            } catch (error) {
                console.error('Error loading progress:', error);
            }
        }

        // Navigate to materi detail
        function goToMateri(topik) {
            console.log('Navigating to:', topik);
            alert(`üöÄ Materi "${topik}" akan segera tersedia!\n\nFitur pembelajaran interaktif sedang dalam pengembangan.`);
            // TODO: Navigate to detail page
            // window.location.href = `materi-detail.html?topik=${topik}`;
        }
    </script>
</body>
</html>